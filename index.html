<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªõi thi·ªáu b·∫£n th√¢n</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üßë Gi·ªõi thi·ªáu b·∫£n th√¢n</h1>
        
        <div class="form-group">
            <label for="ho-ten">üë§ H·ªç v√† t√™n:</label>
            <input type="text" id="ho-ten" name="ho-ten" required>
        </div>

        <div class="form-group">
            <label for="ngay-sinh">üìÖ Ng√†y sinh:</label>
            <input type="date" id="ngay-sinh" name="ngay-sinh" required>
        </div>

        <div class="form-group">
            <label>‚ö§ Gi·ªõi t√≠nh:</label>
            <div>
                <input type="radio" id="nam" name="gioi-tinh" value="Nam">
                <label for="nam">Nam</label>
                <input type="radio" id="nu" name="gioi-tinh" value="N·ªØ">
                <label for="nu">N·ªØ</label>
            </div>
        </div>

        <div class="form-group">
            <label>‚ù§Ô∏è S·ªü th√≠ch:</label>
            <div class="hobbies-container">
                <div class="hobby-item">
                    <input type="checkbox" id="doc-sach" name="so-thich" value="ƒê·ªçc s√°ch">
                    <label for="doc-sach">üìö ƒê·ªçc s√°ch</label>
                </div>
                <div class="hobby-item">
                    <input type="checkbox" id="nghe-nhac" name="so-thich" value="Nghe nh·∫°c">
                    <label for="nghe-nhac">üéµ Nghe nh·∫°c</label>
                </div>
                <div class="hobby-item">
                    <input type="checkbox" id="xem-phim" name="so-thich" value="Xem phim">
                    <label for="xem-phim">üé¨ Xem phim</label>
                </div>
                <div class="hobby-item">
                    <input type="checkbox" id="du-lich" name="so-thich" value="Du l·ªãch">
                    <label for="du-lich">‚úàÔ∏è Du l·ªãch</label>
                </div>
                <div class="hobby-item">
                    <input type="checkbox" id="the-thao" name="so-thich" value="Th·ªÉ thao">
                    <label for="the-thao">‚öΩ Th·ªÉ thao</label>
                </div>
                <div class="hobby-item">
                    <input type="checkbox" id="nau-an" name="so-thich" value="N·∫•u ƒÉn">
                    <label for="nau-an">üç≥ N·∫•u ƒÉn</label>
                </div>
                <div class="hobby-item">
                    <input type="checkbox" id="choi-game" name="so-thich" value="Ch∆°i game">
                    <label for="choi-game">üéÆ Ch∆°i game</label>
                </div>
                <div class="hobby-item">
                    <input type="checkbox" id="nhiep-anh" name="so-thich" value="Nhi·∫øp ·∫£nh">
                    <label for="nhiep-anh">üì∏ Nhi·∫øp ·∫£nh</label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>üìç ƒê·ªãa ch·ªâ:</label>
            <div class="address-group">
                <select id="tinh" name="tinh" required>
                    <option value="">Ch·ªçn t·ªânh/th√†nh</option>
                </select>
                <select id="huyen" name="huyen" required>
                    <option value="">Ch·ªçn qu·∫≠n/huy·ªán</option>
                </select>
                <select id="xa" name="xa" required>
                    <option value="">Ch·ªçn ph∆∞·ªùng/x√£</option>
                </select>
            </div>
        </div>

        <div class="button-group">
            <button id="submit-btn" onclick="showResult()">‚úÖ Xong</button>
            <button id="view-source-btn" onclick="viewSource()">üîç Xem ngu·ªìn trang</button>
        </div>

        <div id="result"></div>
    </div>

    <script>
        fetch('location.json')
            .then(response => response.json())
            .then(data => {
                const tinhSelect = document.getElementById('tinh');
                const huyenSelect = document.getElementById('huyen');
                const xaSelect = document.getElementById('xa');

                data.forEach(tinh => {
                    const option = document.createElement('option');
                    option.value = tinh.code;
                    option.text = tinh.name;
                    tinhSelect.appendChild(option);
                });

                tinhSelect.addEventListener('change', (e) => {
                    const tinhCode = e.target.value;
                    const tinh = data.find(t => t.code == tinhCode);
                    huyenSelect.innerHTML = '<option value="">Ch·ªçn qu·∫≠n/huy·ªán</option>';
                    xaSelect.innerHTML = '<option value="">Ch·ªçn ph∆∞·ªùng/x√£</option>';
                    tinh.districts.forEach(huyen => {
                        const option = document.createElement('option');
                        option.value = huyen.code;
                        option.text = huyen.name;
                        huyenSelect.appendChild(option);
                    });
                });

                huyenSelect.addEventListener('change', (e) => {
                    const huyenCode = e.target.value;
                    const tinh = data.find(t => t.districts.find(h => h.code == huyenCode));
                    const huyen = tinh.districts.find(h => h.code == huyenCode);
                    xaSelect.innerHTML = '<option value="">Ch·ªçn ph∆∞·ªùng/x√£</option>';
                    huyen.wards.forEach(xa => {
                        const option = document.createElement('option');
                        option.value = xa.code;
                        option.text = xa.name;
                        xaSelect.appendChild(option);
                    });
                });
            });

        function showResult() {
            const hoTen = document.getElementById('ho-ten').value;
            const ngaySinh = document.getElementById('ngay-sinh').value;
            const gioiTinh = document.querySelector('input[name="gioi-tinh"]:checked')?.value;
            const soThich = Array.from(document.querySelectorAll('input[name="so-thich"]:checked'))
                .map(checkbox => checkbox.value);
            const tinh = document.getElementById('tinh');
            const huyen = document.getElementById('huyen');
            const xa = document.getElementById('xa');

            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h3>üìù Th√¥ng tin c·ªßa b·∫°n:</h3>
                <p><strong>H·ªç v√† t√™n:</strong> ${hoTen}</p>
                <p><strong>Ng√†y sinh:</strong> ${ngaySinh}</p>
                <p><strong>Gi·ªõi t√≠nh:</strong> ${gioiTinh || 'Ch∆∞a ch·ªçn'}</p>
                <p><strong>S·ªü th√≠ch:</strong> ${soThich.length ? soThich.join(', ') : 'Ch∆∞a ch·ªçn'}</p>
                <p><strong>ƒê·ªãa ch·ªâ:</strong> ${xa.options[xa.selectedIndex]?.text || ''}, ${huyen.options[huyen.selectedIndex]?.text || ''}, ${tinh.options[tinh.selectedIndex]?.text || ''}</p>
            `;
        }

        function viewSource() {
            const sourceWindow = window.open('', '_blank');
            sourceWindow.document.write('<html><head><title>Source Code</title></head><body>');
            sourceWindow.document.write('<pre>');
            sourceWindow.document.write(document.documentElement.outerHTML
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
            );
            sourceWindow.document.write('</pre></body></html>');
            sourceWindow.document.close();
        }
    </script>
</body>
</html>